{% extends "base.html.twig" %}

{% block body %}

	<h3 class="container display-7 border border-warning-subtle text-center rounded-3">Détails articles :</h3>

	<h5 class="text-center">{{ article.title }}</h5>
	<p class="container text-center">{{ article.description }}</p>
	<div class="text-center">
		<img id="light" class="" src="https://upload.wikimedia.org/wikipedia/commons/b/bb/Gorgosaurus_BW_transparent.png" alt="">
	</div>
	<p class="container text-center border border-success-subtle rounded-5">Dernière modification le
		{{ article.updated|date("d/m/Y H:i:s") }}</p>

	{% set role = article.getUser() %}
	{% if app.user is same as(role) or is_granted('ROLE_ADMIN')%}
		<div class="d-flex justify-content-center">
			<a class="btn btn-primary" href="{{path('article_edit', { id : article.id }) }}">Modifier</a>
			<a class="btn btn-primary" href="{{path('article_delete', { id : article.id }) }}" onclick="deleteAlert()">Supprimer</a>
		</div>
	{% endif %}

	{% if is_granted('IS_AUTHENTICATED_FULLY') %}

		<div class="container" id="divCommentary">
			{{ form_start(form) }}
			<p>{{ form_row(form.comment) }}</p>
			<div class="d-flex justify-content-center">
				<p class="text-center button">{{ form_row(form.save) }}</p>
			</div>
			{{ form_end(form) }}
		</div>

		{% elseif is_granted('IS_AUTHENTICATED_FULLY') is same as( false )  %}
			<div class="d-flex justify-content-center mt-5">
				Pour modifier des articles ou laisser des commentaires &nbsp<a href="{{path('app_login')}}" style="text-decoration:none;color: yellowgreen">connectez vous &nbsp</a> ou &nbsp<a href="{{path('inscription')}}" style="text-decoration:none;color: yellowgreen;">créez un compte</a>&nbsp!
			</div>
		{% else %}
	{% endif %}

	<div class="container">
		{% for commentary in commentaries %}
		<p class="card-text">{{ commentary.comment }}</p>
		<p class="card-text">{{ commentary.created|date("d/m/Y H:i:s") }}</p>
		{% endfor %}
	</div>

	<script>
		function deleteAlert() {
			if (confirm("Etes-vous sûr de supprimer cet article ?") === true) {
				return true;
			} else {
			event.stopPropagation();
			event.preventDefault();
			}
	}
	</script>
{% endblock %}
